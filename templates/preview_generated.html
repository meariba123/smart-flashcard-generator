{% extends "layout.html" %}

{% block content %}
  <h2>Generated Flashcards (Preview)</h2>

  {% if flashcards|length == 0 %}
    <p>No content extracted from the file.</p>
  {% else %}
    <form method="POST" action="{{ url_for('save_generated_flashcards') }}">
      <ul>
        {% for card in flashcards %}
          <li>
            <strong>{{ card.question }}</strong><br>
            {{ card.answer }}
            <br>
            <small>
              Confidence Score: 
              <span style="color: {% if card.score >= 0.7 %}green{% elif card.score >= 0.5 %}orange{% else %}red{% endif %}">
                {{ (card.score * 100) | round(0) }}%
              </span>
            </small>

            <!-- Hidden inputs so the backend can save Q&A + score -->
            <input type="hidden" name="questions" value="{{ card.question }}">
            <input type="hidden" name="answers" value="{{ card.answer }}">
            <input type="hidden" name="scores" value="{{ card.score }}">
          </li>
        {% endfor %}
      </ul>

      <br>
      <label>Enter Flashcard Set Name:</label>
      <input type="text" name="set_name" required>
      <button type="submit">Save Flashcards</button>
    </form>
  {% endif %}

  <br>
  <a href="{{ url_for('dashboard') }}">Back to Dashboard</a>
{% endblock %}
